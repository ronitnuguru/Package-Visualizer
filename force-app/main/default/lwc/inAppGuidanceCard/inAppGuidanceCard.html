<template>
  <lightning-card>
      <h3 slot="title" class="slds-truncate">
          <lightning-icon 
              icon-name={iconName}
              size="medium"
              class="slds-m-right_small card_header_icon"
          ></lightning-icon>
          {title}
      </h3>
      <lightning-button-group slot="actions">
        <!--
          <lightning-button label="Guide" icon-name="utility:help_doc_ext" icon-position="right" variant="border-filled" onclick={handleHelpDoc}></lightning-button>
        -->
          <lightning-button-icon icon-name="utility:slack_conversations" variant="border-filled" tooltip="Partnerblazer Slack Community" onclick={handleSlackCommunity}></lightning-button-icon>
      </lightning-button-group>
      <div class="slds-card__body slds-card__body_inner">
          <template if:true={displaySpinner}>
              <lightning-spinner
                alternative-text="Loading"
                size="medium"
                variant="brand"
              ></lightning-spinner>
          </template>
            <template if:false={displaySpinner}>
              <template for:each={resourcesData} for:item="resource" for:index="index">
                <div class="card-style slds-var-m-bottom_small slds-border_top slds-border_right slds-border_bottom slds-border_left slds-box slds-box_xx-small" key={resource.label}>
                  <lightning-card>
                    <h3 slot="title" class="slds-truncate" title={resource.label}>
                      <lightning-icon 
                          icon-name={resource.icon}
                          size="medium"
                          class="slds-m-right_small"
                      ></lightning-icon>
                      {resource.label}
                    </h3>
                    <lightning-button-group slot="actions">
                      <template lwc:if={resource.helpGuideLink}>
                        <lightning-button-icon variant="border-filled" icon-name={resource.helpGuideIcon} data-index={index} onclick={navigateToHelpGuide}></lightning-button-icon>
                      </template>
                    </lightning-button-group>
                    <div class="slds-card__body_inner">
                      <p>{resource.description}</p>
                    </div>
                    <div slot="footer">
                      <lightning-button-icon tooltip="AgentExchange Listing" variant="border-filled" icon-name="utility:agent_astro" icon-position="right" data-index={index} onclick={navigateToAgentExchangeListing} class="slds-m-right_x-small"></lightning-button-icon>
                      <lightning-button label="Install" variant="brand" icon-name="utility:download" icon-position="right" data-index={index} onclick={handleInstall}></lightning-button>
                    </div>
                  </lightning-card>
                </div>
              </template>
          </template>
      </div>
  </lightning-card>
</template>