<template>
  <article class="slds-card slds-m-bottom_xx-large">
    <div class="slds-grid slds-card__header">
      <header class="slds-media slds-media_center slds-has-flexi-truncate">
        <div
          class="slds-grid slds-grid_vertical-align-center slds-size_3-of-4 slds-medium-size_2-of-3"
        >
          <div class="slds-media__figure">
            <span class="slds-icon_container">
              <lightning-icon icon-name="utility:setup_assistant_guide"></lightning-icon>
            </span>
          </div>
          <div class="slds-media__body">
            <h2 class="slds-text-heading_medium">
              Setup Assistant ({packageTypes})
            </h2>
          </div>
        </div>
      </header>
      <template if:true={packageListAvailable}>
        <lightning-button-group>
          <lightning-button-icon
            icon-name="utility:back"
            variant="border-filled"
            tooltip="Back to Package Visualizer"
            onclick={handleBackToPackageVisualizer}
          ></lightning-button-icon>
        </lightning-button-group>
      </template>
    </div>
    <div class="slds-card__body slds-card__body_inner slds-border_top">
      <template if:true={alert}>
        <div class="slds-notify slds-notify_alert" role="alert">
          <span class="slds-assistive-text">info</span>
          <span
            class="slds-icon_container slds-icon-utility-user slds-var-m-right_x-small"
          >
            <lightning-icon
              icon-name="utility:screen"
              size="x-small"
              variant="inverse"
            ></lightning-icon>
          </span>
          <h2>
            {alert}
          </h2>
        </div>
      </template>
      <ol class="slds-setup-assistant">
        <li class="slds-setup-assistant__item">
          <div class="">
            <article class="slds-setup-assistant__step">
              <div class="slds-setup-assistant__step-summary">
                <div class="slds-media">
                  <div
                    class="slds-setup-assistant__step-summary-content slds-media__body"
                  >
                    <h3
                      class="slds-setup-assistant__step-summary-title slds-text-heading_small"
                    >
                      <lightning-icon
                        icon-name="utility:component_customization"
                        size="small"
                        class="slds-var-p-right_small"
                      ></lightning-icon>
                      Component Setup and Customization
                    </h3>
                    <div
                      class="slds-progress slds-progress_vertical slds-progress_success"
                    >
                      <ol
                        class="slds-progress__list slds-progress__list-bordered border-bottom"
                      >
                        <li class="slds-progress__item">
                          <template if:false={isPackageVisualizerEnabled}>
                            <div class="slds-progress__marker">
                              <span class="slds-assistive-text">Active</span>
                            </div>
                          </template>
                          <template if:true={isPackageVisualizerEnabled}>
                            <span
                              class="slds-icon_container slds-icon-utility-success slds-progress__marker slds-progress__marker_icon slds-progress__marker_icon-success"
                              title="Complete"
                            >
                              <lightning-icon
                                icon-name="utility:success"
                                alternative-text="Success!"
                                variant="success"
                                size="x-small"
                                class="success-icon-style"
                              ></lightning-icon>
                            </span>
                          </template>
                          <div
                            class="slds-progress__item_content slds-grid slds-grid_align-spread"
                          >
                            <div class="slds-size_3-of-4">
                              <strong class="slds-text-title_caps">
                                Package Visualizer Permission
                              </strong>
                              <p class="slds-var-m-top_xx-small">
                                Gain access to the App! This permission allows
                                the user to all of Package Visualizer's core
                                functionalities
                              </p>
                            </div>
                            <div
                              class="slds-grid slds-grid_align-end slds-size_1-of-4"
                            >
                              <lightning-button-icon
                                icon-name="action:manage_perm_sets"
                                variant="brand"
                                onclick={navigateToPkgVizMainPermSet}
                                disabled={isSetupEnabled}
                              ></lightning-button-icon>
                            </div>
                          </div>
                        </li>
                        <template if:true={is2GP}>
                          <li class="slds-progress__item">
                            <template if:false={isPushUpgradeEnabled}>
                              <div class="slds-progress__marker">
                                <span class="slds-assistive-text">Active</span>
                              </div>
                            </template>
                            <template if:true={isPushUpgradeEnabled}>
                              <span
                                class="slds-icon_container slds-icon-utility-success slds-progress__marker slds-progress__marker_icon slds-progress__marker_icon-success"
                                title="Complete"
                              >
                                <lightning-icon
                                  icon-name="utility:success"
                                  alternative-text="Success!"
                                  variant="success"
                                  size="x-small"
                                  class="success-icon-style"
                                ></lightning-icon>
                              </span>
                            </template>
                            <div
                              class="slds-progress__item_content slds-grid slds-grid_align-spread"
                            >
                              <div class="slds-size_3-of-4">
                                <strong class="slds-text-title_caps">
                                  Package Visualizer Push Upgrade Permission
                                </strong>
                                <p class="slds-var-m-top_xx-small">
                                  With great power comes great responsibility.
                                  This permission allows the user to view and
                                  schedule push upgrades
                                </p>
                              </div>
                              <div
                                class="slds-grid slds-grid_align-end slds-size_1-of-4"
                              >
                                <lightning-button-icon
                                  icon-name="action:manage_perm_sets"
                                  variant="brand"
                                  onclick={navigateToPkgVizPushUpgradePermSet}
                                  disabled={isSetupEnabled}
                                ></lightning-button-icon>
                              </div>
                            </div>
                          </li>
                        </template>
                      </ol>
                      <ol
                        class="list_ordered"
                      >
                        <li class="list_item">
                          <div
                            class="slds-progress__item_content slds-grid slds-grid_align-spread border-bottom"
                          >
                            <div class="slds-size_3-of-4">
                              <strong class="slds-text-title_caps">
                                Configure Remote Site Settings
                              </strong>
                              <p class="slds-var-m-top_xx-small">
                                By turning on the Active field for
                                SalesforceTrust, the app is able to leverage
                                Salesforce's Trust APIs
                              </p>
                            </div>
                            <div
                              class="slds-grid slds-grid_align-end slds-size_1-of-4"
                            >
                              <lightning-button-icon
                                icon-name="utility:bundle_config"
                                variant="brand"
                                onclick={navigateToRemoteSiteSettings}
                                disabled={isSetupEnabled}
                              ></lightning-button-icon>
                            </div>
                          </div>
                        </li>
                        <li class="list_item">
                          <div
                            class="slds-progress__item_content slds-grid slds-grid_align-spread"
                          >
                            <div class="slds-size_3-of-4">
                              <strong class="slds-text-title_caps">
                                Configure CSP Trusted Sites
                              </strong>
                              <p class="slds-var-m-top_xx-small">
                                By turning on the Active field for
                                SalesforceTrust, the app can securely access the
                                Content Security Policy (CSP) of Salesforce's
                                Trust APIs
                              </p>
                            </div>
                            <div
                              class="slds-grid slds-grid_align-end slds-size_1-of-4"
                            >
                              <lightning-button-icon
                                icon-name="utility:bundle_config"
                                variant="brand"
                                onclick={navigateToCSPTrustedSites}
                                disabled={isSetupEnabled}
                              ></lightning-button-icon>
                            </div>
                          </div>
                        </li>
                      </ol>
                    </div>
                  </div>
                  <div class="slds-media__figure slds-media__figure_reverse">
                    <lightning-button
                      label="Guide"
                      icon-name="utility:quip"
                      icon-position="right"
                      onclick={navigateToGuide}
                    ></lightning-button>
                  </div>
                </div>
              </div>
            </article>
          </div>
        </li>
        <template if:true={is2GP}>
          <li class="slds-setup-assistant__item">
            <div class="">
              <article class="slds-setup-assistant__step">
                <div class="slds-setup-assistant__step-summary">
                  <div class="slds-media">
                    <div
                      class="slds-setup-assistant__step-summary-content slds-media__body"
                    >
                      <h3
                        class="slds-setup-assistant__step-summary-title slds-text-heading_small"
                      >
                        <lightning-icon
                          icon-name="utility:toggle"
                          size="small"
                          class="slds-var-p-right_small"
                        ></lightning-icon>
                        Enable Dev Hub Features
                      </h3>
                      <p>
                        Dev Hub allows you to create and manage Namespaces, Scratch Orgs, Unlocked Packages, and Second-Generation Managed Packages (2GP).&nbsp;
                        <a
                          href="https://developer.salesforce.com/docs/atlas.en-us.sfdx_dev.meta/sfdx_dev/sfdx_setup_enable_devhub.htm"
                          target="_blank"
                          title="Learn More"
                          >Learn More</a
                        >
                      </p>
                        Required Feature Toggles:
                        <ul class="slds-list_dotted">
                          <li>Enable Dev Hub</li>
                          <li>Enable Unlocked Packages and Second-Generation Managed Packages</li>
                        </ul>
                    </div>
                    <div class="slds-media__figure slds-media__figure_reverse">
                      <lightning-button-group>
                        <lightning-button
                          label="Setup"
                          icon-name="utility:setup"
                          icon-position="right"
                          onclick={navigateToDevHub}
                          disabled={isSetupEnabled}
                        ></lightning-button>
                        <!--
                        <lightning-button-icon 
                          icon-name="utility:agent_astro"
                          tooltip="Ask Agentforce"
                          value="enableDevHub"
                          onclick={openAskAgentforce}
                        ></lightning-button-icon>
                        -->
                      </lightning-button-group> 
                    </div>
                  </div>
                </div>
              </article>
            </div>
          </li>
          <li class="slds-setup-assistant__item">
            <div class="">
              <article class="slds-setup-assistant__step">
                <div class="slds-setup-assistant__step-summary">
                  <div class="slds-media">
                    <div
                      class="slds-setup-assistant__step-summary-content slds-media__body"
                    >
                      <h3
                        class="slds-setup-assistant__step-summary-title slds-text-heading_small"
                      >
                        <lightning-icon
                          icon-name="utility:record_create"
                          size="small"
                          class="slds-var-p-right_small"
                        ></lightning-icon>
                        Create and Register Your Namespace
                      </h3>
                      <p>
                        With 2GP, you can share a single namespace with multiple
                        packages. This makes sharing and maintenance of code much easier. We recommend that you
                        use a single namespace for all of your 2GP packages
                      </p>
                      <div class="slds-progress slds-progress_vertical slds-progress_success">
                        <ol class="slds-progress__list slds-progress__list-bordered">
                          <li class="slds-progress__item">
                            <div class="slds-progress__marker"></div>
                            <div class="slds-progress__item_content slds-grid slds-grid_align-spread">
                              <div class="slds-size_3-of-4">
                                Create a Developer Editon Org for the sole purpose of registering your package's namespace. It may take a little while for org creation. Check your email once the org is provisioned. Then go to this newly provisioned org's Setup -> Package Manager to register the namespace.&nbsp;
                                <a
                                  href="https://developer.salesforce.com/docs/atlas.en-us.pkg2_dev.meta/pkg2_dev/sfdx_dev_dev2gp_create_namespace.htm"
                                  target="_blank"
                                  title="Learn More"
                                  >Learn More</a
                                >
                              </div>
                              
                              <div class="slds-grid slds-grid_align-end slds-size_1-of-4">
                                <lightning-button-icon
                                  tooltip="Create Org"
                                  icon-name="utility:salesforce1"
                                  variant="brand"
                                  onclick={handleCreateOrgs}
                                >
                                </lightning-button-icon>
                              </div>
                              
                            </div>
                          </li>
                          <li class="slds-progress__item">
                            <div class="slds-progress__marker"></div>
                            <div class="slds-progress__item_content slds-grid slds-grid_align-spread">
                              <div class="slds-size_3-of-4">
                                Link your registered namespace by authenticating into the Developer Edition Org you created in the previous step. Once linked, we can create 2GPs with that namespace. This allows you to organize, and distribute your code and metadata in a scalable manner.&nbsp;
                                <a
                                  href="https://developer.salesforce.com/docs/atlas.en-us.248.0.sfdx_dev.meta/sfdx_dev/sfdx_dev_reg_namespace.htm"
                                  target="_blank"
                                  title="Learn More"
                                  >Learn More</a
                                >
                              </div>
                              
                              <div class="slds-grid slds-grid_align-end slds-size_1-of-4">
                                <lightning-button-icon
                                  tooltip="Namespace Registries"
                                  icon-name="utility:salesforce_page"
                                  variant="brand"
                                  onclick={navigateToNamespace}
                                >
                                </lightning-button-icon>
                              </div>
                            </div>
                          </li>
                        </ol>
                      </div>
                    </div>
                    <div class="slds-media__figure slds-media__figure_reverse">
                      <lightning-button-group>
                        <lightning-button
                          label="Guide"
                          icon-name="utility:apex"
                          icon-position="right"
                          onclick={navigateUnderstandingNamespaces}
                          disabled={isSetupEnabled}
                        ></lightning-button>
                        <!--
                        <lightning-button-icon 
                          icon-name="utility:agent_astro"
                          tooltip="Ask Agentforce"
                          value="createRegisterNamespace"
                          onclick={openAskAgentforce}
                        ></lightning-button-icon>
                        -->
                      </lightning-button-group>
                    </div>
                  </div>
                </div>
              </article>
            </div>
          </li>
          <li class="slds-setup-assistant__item">
            <div class="">
              <article class="slds-setup-assistant__step">
                <div class="slds-setup-assistant__step-summary">
                  <div class="slds-media">
                    <div
                      class="slds-setup-assistant__step-summary-content slds-media__body"
                    >
                      <h3
                        class="slds-setup-assistant__step-summary-title slds-text-heading_small"
                      >
                        <lightning-icon
                          icon-name="utility:user_role"
                          size="small"
                          class="slds-var-p-right_small"
                        ></lightning-icon>
                        Provision Access to Developers
                      </h3>
                      <p>
                        The Limited Access User Profile is designed for users whose role is to build customizations or applications. These 100 licenses restrict access to standard and custom objects but provide essential access to dev hub, development tools, scratch org environments, and packaging related functionalities&nbsp;
                        <a
                          href="https://developer.salesforce.com/docs/atlas.en-us.pkg2_dev.meta/pkg2_dev/sfdx_pkg_slalf_pkg_dev.htm"
                          target="_blank"
                          title="Learn More"
                          >Learn More</a
                        >
                      </p>
                      <div class="slds-progress slds-progress_vertical slds-progress_success">
                        <ol class="slds-progress__list slds-progress__list-bordered">
                          <li class="slds-progress__item">
                            <div class="slds-progress__marker"></div>
                            <div class="slds-progress__item_content slds-grid slds-grid_align-spread">
                              <div class="slds-size_3-of-4">
                                Create New Users and Select Salesforce Limited Access - Free for User License, and then Limited Access User for Profile
                              </div>
                              <div class="slds-grid slds-grid_align-end slds-size_1-of-4">
                                <lightning-button-group>
                                  <lightning-button-icon
                                    icon-name="utility:help_doc_ext"
                                    variant="brand"
                                    onclick={navigateProvUsers1}
                                  ></lightning-button-icon>
                                </lightning-button-group>
                              </div>
                            </div>
                          </li>
                          <li class="slds-progress__item">
                            <div class="slds-progress__marker"></div>
                            <div class="slds-progress__item_content slds-grid slds-grid_align-spread">
                              <div class="slds-size_3-of-4">
                                Create a Permission Set for developer to access the required Dev Hub Objects
                              </div>
                              <div class="slds-grid slds-grid_align-end slds-size_1-of-4">
                                <lightning-button-icon
                                  icon-name="utility:help_doc_ext"
                                  variant="brand"
                                  onclick={navigateProvUsers2}
                                ></lightning-button-icon>
                              </div>
                            </div>
                          </li>
                          <li class="slds-progress__item">
                            <div class="slds-progress__marker"></div>
                            <div class="slds-progress__item_content slds-grid slds-grid_align-spread">
                              <div class="slds-size_3-of-4">
                                Assign System Permissions for the ability to create Second-Generation Managed Packages and Package Versions
                              </div>
                              <div class="slds-grid slds-grid_align-end slds-size_1-of-4">
                                <lightning-button-icon
                                  icon-name="utility:help_doc_ext"
                                  variant="brand"
                                  onclick={navigateProvUsers3}
                                ></lightning-button-icon>
                              </div>
                            </div>
                          </li>
                        </ol>
                      </div>
                    </div>
                    <div class="slds-media__figure slds-media__figure_reverse">
                      <lightning-button-group>
                        <lightning-button
                          label="Limited Access User Setup"
                          icon-name="utility:setup"
                          icon-position="right"
                          onclick={navigateLimitedAccessUserProfiile}
                          disabled={isSetupEnabled}
                        ></lightning-button>
                        <!--
                        <lightning-button-icon 
                          icon-name="utility:agent_astro"
                          tooltip="Ask Agentforce"
                          value="provAccessDevs"
                          onclick={openAskAgentforce}
                        ></lightning-button-icon>
                        -->
                      </lightning-button-group>
                    </div>
                  </div>
                </div>
              </article>
            </div>
          </li>
        </template>
        <li class="slds-setup-assistant__item">
          <div class="">
            <article class="slds-setup-assistant__step">
              <div class="slds-setup-assistant__step-summary">
                <div class="slds-media">
                  <div
                    class="slds-setup-assistant__step-summary-content slds-media__body"
                  >
                    <h3
                      class="slds-setup-assistant__step-summary-title slds-text-heading_small"
                    >
                      <lightning-icon
                        icon-name="utility:apex"
                        size="small"
                        class="slds-var-p-right_small"
                      ></lightning-icon>
                      Develop and Manage Apps via Developer Experience (DX)
                    </h3>
                    <p>
                      Innovate faster on the Salesforce platform with modern tools that are that are designed to increase developer productivity, empower teams to build, test, ship faster and achieve new levels of agility.
                    </p>
                    <div class="slds-progress slds-progress_vertical slds-progress_success">
                      <ol class="slds-progress__list slds-progress__list-bordered">
                        <li class="slds-progress__item">
                          <div class="slds-progress__marker"></div>
                          <div class="slds-progress__item_content slds-grid slds-grid_align-spread">
                            <div class="slds-size_3-of-4">
                              Salesforce CLI is a command-line interface that simplifies development and build automation when working with your Salesforce org. Use it to create and manage orgs, synchronize source to and from orgs, create and install packages, and more.&nbsp;
                              <a
                                href="https://developer.salesforce.com/docs/atlas.en-us.sfdx_setup.meta/sfdx_setup/sfdx_setup_intro.htm"
                                target="_blank"
                                title="Learn More"
                                >Learn More</a
                              >
                            </div>
                            <div class="slds-grid slds-grid_align-end slds-size_1-of-4">
                              <lightning-button-icon
                                icon-name="utility:trailhead_ext"
                                variant="brand"
                                onclick={navigateToCLITrailhead}
                              ></lightning-button-icon>
                            </div>
                          </div>
                        </li>
                        <li class="slds-progress__item">
                          <div class="slds-progress__marker"></div>
                          <div class="slds-progress__item_content slds-grid slds-grid_align-spread">
                            <div class="slds-size_3-of-4">
                              Salesforce Extensions for Visual Studio Code Editor accelerates development on the Customer 360 Platform with features for working with scratch orgs, Lightning Web Components, Apex and other metadata.&nbsp;
                              <a
                                href="https://developer.salesforce.com/tools/vscode"
                                target="_blank"
                                title="Learn More"
                                >Learn More</a
                              >
                            </div>
                            <div class="slds-grid slds-grid_align-end slds-size_1-of-4">
                              <lightning-button-icon
                                icon-name="utility:trailhead_ext"
                                variant="brand"
                                onclick={navigateToVSCodeTrailhead}
                              ></lightning-button-icon>
                            </div>
                          </div>
                        </li>
                        <li class="slds-progress__item">
                          <div class="slds-progress__marker"></div>
                          <div class="slds-progress__item_content slds-grid slds-grid_align-spread">
                            <div class="slds-size_3-of-4">
                              Lay the foundation of your package by setting up your app's Project Structure. Ensure you edit the namespace parameter with global namespace you have registered for your package
                            </div>
                            <div class="slds-grid slds-grid_align-end slds-size_1-of-4">
                              <lightning-button-icon
                                icon-name="utility:help_doc_ext"
                                variant="brand"
                                onclick={navigateToDXProjectStructure}
                              ></lightning-button-icon>
                            </div>
                          </div>
                        </li>
                        <li class="slds-progress__item">
                          <div class="slds-progress__marker"></div>
                          <div class="slds-progress__item_content slds-grid slds-grid_align-spread">
                            <div class="slds-size_3-of-4">
                              Create an Application by following the basic workflow when you are starting from scratch to develop an app that runs on the Salesforce Platform
                            </div>
                            <div class="slds-grid slds-grid_align-end slds-size_1-of-4">
                              <lightning-button-icon
                                icon-name="utility:help_doc_ext"
                                variant="brand"
                                onclick={navigateToDXCreateApplication}
                              ></lightning-button-icon>
                            </div>
                          </div>
                        </li>
                        <li class="slds-progress__item">
                          <div class="slds-progress__marker"></div>
                          <div class="slds-progress__item_content slds-grid slds-grid_align-spread">
                            <div class="slds-size_3-of-4">
                              Build a sample Scratch Org Definition File to mimic the shape of an org towards your development lifecycle, such as sandbox, packaging, or production. These source-driven and fully configurable scratch orgs allow developers to emulate different Salesforce editions with different features and settings
                            </div>
                            <div class="slds-grid slds-grid_align-end slds-size_1-of-4">
                              <lightning-button-icon
                                icon-name="utility:insert_tag_field"
                                variant="brand"
                                onclick={navigateScratchOrgBuild}
                              ></lightning-button-icon>
                            </div>
                          </div>
                        </li>
                        <li class="slds-progress__item">
                          <div class="slds-progress__marker"></div>
                          <div class="slds-progress__item_content slds-grid slds-grid_align-spread">
                            <div class="slds-size_3-of-4">
                              Keep your code secure by incorporating Salesforce Code Analyzer's GitHub Action in your CI/CD workflow
                            </div>
                            <div class="slds-grid slds-grid_align-end slds-size_1-of-4">
                              <lightning-button-icon
                                icon-name="utility:help_doc_ext"
                                variant="brand"
                                onclick={navigateToCodeAnalyzerGitHubAction}
                              ></lightning-button-icon>
                            </div>
                          </div>
                        </li>
                      </ol>
                    </div>
                  </div>
                  <div class="slds-media__figure slds-media__figure_reverse">
                    <lightning-button-group>
                      <lightning-button
                        label="Developer Center"
                        icon-name="utility:salesforce1"
                        icon-position="right"
                        onclick={navigateToDXDevCenter}
                      ></lightning-button>
                      <!--
                      <lightning-button-icon 
                        icon-name="utility:agent_astro"
                        tooltip="Ask Agentforce"
                        value="dxSetup"
                        onclick={openAskAgentforce}
                      ></lightning-button-icon>
                      -->
                    </lightning-button-group>
                  </div>
                </div>
              </div>
            </article>
          </div>
        </li>
        <li class="slds-setup-assistant__item">
          <div class="">
            <article class="slds-setup-assistant__step">
              <div class="slds-setup-assistant__step-summary">
                <div class="slds-media">
                  <div
                    class="slds-setup-assistant__step-summary-content slds-media__body"
                  >
                    <h3
                      class="slds-setup-assistant__step-summary-title slds-text-heading_small"
                    >
                      <lightning-icon
                        icon-name="utility:package"
                        size="small"
                        class="slds-var-p-right_small"
                      ></lightning-icon>
                      Incorporate CLI into your Application Lifecycle Management
                    </h3>
                    <p>
                      <code>sf</code> CLI commands embraces the future of Salesforce development with all new capabilities that enable you to experience ease with package commands, faster updates and installs.&nbsp;
                      <a
                        href="https://developer.salesforce.com/blogs/2023/07/salesforce-cli-sf-v2-is-here"
                        target="_blank"
                        title="Learn More"
                        >Learn More</a>
                    </p>
                    <div class="slds-progress slds-progress_vertical slds-progress_success">
                      <ol class="slds-progress__list slds-progress__list-bordered border-bottom">
                        <li class="slds-progress__item">
                          <div class="slds-progress__marker"></div>
                          <div class="slds-progress__item_content slds-grid slds-grid_align-spread">
                            <div class="slds-size_3-of-4">
                              To <a href="https://developer.salesforce.com/docs/atlas.en-us.pkg2_dev.meta/pkg2_dev/sfdx_dev_dev2gp_create_pkg_base.htm" target="_blank">create a package</a>: <code>sf package create --name "Package Name" --description "Your Package Descripton" --package-type Managed --path force-app --target-dev-hub "DevHubOrgAlias"</code>
                            </div>
                            <div class="slds-grid slds-grid_align-end slds-size_1-of-4">
                              <lightning-button-icon
                                icon-name="utility:apex"
                                variant="brand"
                                onclick={navigateToPackageCreate}
                              ></lightning-button-icon>
                            </div>
                          </div>
                        </li>
                        <li class="slds-progress__item">
                          <div class="slds-progress__marker"></div>
                          <div class="slds-progress__item_content slds-grid slds-grid_align-spread">
                            <div class="slds-size_3-of-4">
                              To <a href="https://developer.salesforce.com/docs/atlas.en-us.pkg2_dev.meta/pkg2_dev/sfdx_dev_dev2gp_create_pkg_ver.htm" target="_blank">create a package version</a>: <code>sf package version create --package "Package Name" --wait 20 --installation-key-bypass --code-coverage --definition-file config/project-scratch-def.json --target-dev-hub "DevHubOrgAlias"</code>
                            </div>
                            <div class="slds-grid slds-grid_align-end slds-size_1-of-4">
                              <lightning-button-icon
                                icon-name="utility:apex"
                                variant="brand"
                                onclick={navigateToPackageVersionCreate}
                              ></lightning-button-icon>
                            </div>
                          </div>
                        </li>
                        <li class="slds-progress__item">
                          <div class="slds-progress__marker"></div>
                          <div class="slds-progress__item_content slds-grid slds-grid_align-spread">
                            <div class="slds-size_3-of-4">
                              To <a href="https://developer.salesforce.com/docs/atlas.en-us.pkg2_dev.meta/pkg2_dev/sfdx_dev_dev2gp_create_pkg_ver_promote.htm" target="_blank">promote/release a package version</a>: <code>sf package version promote --package "Package Version Alias"</code>
                            </div>
                            <div class="slds-grid slds-grid_align-end slds-size_1-of-4">
                              <lightning-button-icon
                                icon-name="utility:apex"
                                variant="brand"
                                onclick={navigateToPackageVersionPromote}
                              ></lightning-button-icon>
                            </div>
                          </div>
                        </li>
                      </ol>
                      <ol
                        class="list_ordered"
                      >
                        <li class="list_item">
                          <div
                            class="slds-progress__item_content slds-grid slds-grid_align-spread border-bottom"
                          >
                            <div class="slds-size_3-of-4">
                              <strong class="slds-text-title_caps">
                                Run Salesforce Code Analyzer Scan
                              </strong>
                              <p class="slds-var-m-top_xx-small">
                                <code>sf scanner run --format=csv --outfile=CodeAnalyzerGeneral.csv --target="./" --category="Security"</code>
                              </p>
                            </div>
                            <div
                              class="slds-grid slds-grid_align-end slds-size_1-of-4"
                            >
                              <lightning-button-icon
                                icon-name="utility:apex"
                                variant="brand"
                                onclick={navigateToCodeAnalyzer}
                              ></lightning-button-icon>
                            </div>
                          </div>
                        </li>
                        <li class="list_item">
                          <div
                            class="slds-progress__item_content slds-grid slds-grid_align-spread border-bottom"
                          >
                            <div class="slds-size_3-of-4">
                              <strong class="slds-text-title_caps">
                                Run Salesforce Graph Engine
                              </strong>
                              <p class="slds-var-m-top_xx-small">
                                <code>sf scanner run dfa --format=csv --outfile=CodeAnalyzerDFA.csv --target="./" --projectdir="./" --category="Security"</code>
                              </p>
                            </div>
                            <div
                              class="slds-grid slds-grid_align-end slds-size_1-of-4"
                            >
                              <lightning-button-icon
                                icon-name="utility:apex"
                                variant="brand"
                                onclick={navigateToGraphEngine}
                              ></lightning-button-icon>
                            </div>
                          </div>
                        </li>
                        <li class="list_item">
                          <div
                            class="slds-progress__item_content slds-grid slds-grid_align-spread"
                          >
                            <div class="slds-size_3-of-4">
                              <strong class="slds-text-title_caps">
                                Run Salesforce Code Analyzer in preparation for AppExchange Security Review
                              </strong>
                              <p class="slds-var-m-top_xx-small">
                                <code>sf scanner run --engine="pmd-appexchange" --format=csv --outfile=CodeAnalyzerPmdAppExchange.csv --target="./"</code>
                              </p>
                            </div>
                            <div
                              class="slds-grid slds-grid_align-end slds-size_1-of-4"
                            >
                              <lightning-button-icon
                                icon-name="utility:apex"
                                variant="brand"
                                onclick={navigateToPMD}
                              ></lightning-button-icon>
                            </div>
                          </div>
                        </li>
                      </ol>
                    </div>
                  </div>
                  <div class="slds-media__figure slds-media__figure_reverse">
                    <lightning-button
                      variant="brand-outline"
                      label="Guide"
                      icon-name="utility:apex"
                      icon-position="right"
                      onclick={navigateTosfCommands}
                    ></lightning-button>
                  </div>
                </div>
              </div>
            </article>
          </div>
        </li>
        <li class="slds-setup-assistant__item">
          <div class="">
            <article class="slds-setup-assistant__step">
              <div class="slds-setup-assistant__step-summary">
                <div class="slds-media">
                  <div
                    class="slds-setup-assistant__step-summary-content slds-media__body"
                  >
                    <h3
                      class="slds-setup-assistant__step-summary-title slds-text-heading_small"
                    >
                      <lightning-icon
                        icon-name="utility:shield"
                        size="small"
                        class="slds-var-p-right_small"
                      ></lightning-icon>
                      Security Review
                    </h3>
                    <p>
                      The Salesforce security team conducts rigorous reviews of all products before publicly listing them on AppExchange. Ensuring that all products go through security review means that customers can feel confident in knowing that any AppExchange offering provides the highest level of protection for their data.&nbsp;
                      <a
                        href="https://developer.salesforce.com/developer-centers/security"
                        target="_blank"
                        title="Learn More"
                        >Learn More</a
                      >
                    </p>
                    <div class="slds-progress slds-progress_vertical slds-progress_success">
                      <ol class="slds-progress__list slds-progress__list-bordered">
                        <li class="slds-progress__item">
                          <div class="slds-progress__marker"></div>
                          <div class="slds-progress__item_content slds-grid slds-grid_align-spread">
                            <div class="slds-size_3-of-4">
                              Learn how to manage your team's access to the Salesforce Partner Community
                            </div>
                            <div class="slds-grid slds-grid_align-end slds-size_1-of-4">
                              <lightning-button-icon
                                icon-name="utility:trailhead_ext"
                                variant="brand"
                                onclick={navigateToManageUsersPartnerCommunity}
                              ></lightning-button-icon>
                            </div>
                          </div>
                        </li>
                        <li class="slds-progress__item">
                          <div class="slds-progress__marker"></div>
                          <div class="slds-progress__item_content slds-grid slds-grid_align-spread">
                            <div class="slds-size_3-of-4">
                              Learn how to manage your AppExchange listings with the Partner Console and Listing Builder
                            </div>
                            <div class="slds-grid slds-grid_align-end slds-size_1-of-4">
                              <lightning-button-icon
                                icon-name="utility:trailhead_ext"
                                variant="brand"
                                onclick={navigateToManageAppxListingTrail}
                              ></lightning-button-icon>
                            </div>
                          </div>
                        </li>
                        <li class="slds-progress__item">
                          <div class="slds-progress__marker"></div>
                          <div class="slds-progress__item_content slds-grid slds-grid_align-spread">
                            <div class="slds-size_3-of-4">
                              Review and learn how to mitigate the top 20 vulnerabilities found in the AppExchange Security Review
                            </div>
                            <div class="slds-grid slds-grid_align-end slds-size_1-of-4">
                              <lightning-button-icon
                                icon-name="utility:help_doc_ext"
                                variant="brand"
                                onclick={navigateToTop20VulnDevPost}
                              ></lightning-button-icon>
                            </div>
                          </div>
                        </li>
                        <template lwc:if={org}>
                          <li class="slds-progress__item">
                            <template if:true={numOfDays}>
                              <div class="slds-progress__marker">
                                <span class="slds-assistive-text">Active</span>
                              </div>
                            </template>
                            <template if:false={numOfDays}>
                              <span
                                class="slds-icon_container slds-icon-utility-success slds-progress__marker slds-progress__marker_icon slds-progress__marker_icon-success"
                                title="Complete"
                              >
                                <lightning-icon
                                  icon-name="utility:success"
                                  alternative-text="Success!"
                                  variant="success"
                                  size="x-small"
                                  class="success-icon-style"
                                ></lightning-icon>
                              </span>
                            </template>
                            <div class="slds-progress__item_content slds-grid slds-grid_align-spread">
                              <div class="slds-size_3-of-4">
                                <template if:true={numOfDays}>
                                  Your Dev Hub Org is set to expire <lightning-relative-date-time value={numOfDays}></lightning-relative-date-time>. You have until <lightning-formatted-date-time value={org.TrialExpirationDate} year="numeric" month="numeric" day="numeric" hour="2-digit"
                                  minute="2-digit" time-zone-name="short"></lightning-formatted-date-time> to log a case via Partner Community and request org extension. Before submitting for Security Review, you will need to also log a case and convert your Partner Business Org ({org.Id}) from Trial to Active status
                                </template>
                                <template if:false={numOfDays}>
                                  Your Dev Hub Org is under Active status! You're all set to submit your package for Security Review! Learn more about maximizing tools and resources available for AppExchange Partners
                                </template>
                              </div>
                              <div class="slds-grid slds-grid_align-end slds-size_1-of-4">
                                <template if:false={numOfDays}>
                                  <lightning-button-icon
                                    icon-name="utility:trailhead_ext"
                                    variant="brand"
                                    onclick={navigateToIsvToolingTrailhead}
                                  ></lightning-button-icon>
                                </template>
                                <template if:true={numOfDays}>
                                  <lightning-button-icon
                                    icon-name="utility:help_doc_ext"
                                    variant="brand"
                                    onclick={navigateToLogCasePartnerCommunity}
                                  ></lightning-button-icon>
                                </template>
                              </div>
                            </div>
                          </li>
                        </template>
                      </ol>
                    </div>
                  </div>
                  <div class="slds-media__figure slds-media__figure_reverse">
                    <lightning-button
                      variant="brand-outline"
                      label="Checklist Builder"
                      icon-name="utility:task"
                      icon-position="right"
                      onclick={navigateToChecklistBuilder}
                    ></lightning-button>
                  </div>
                </div>
              </div>
            </article>
          </div>
        </li>
        <li class="slds-setup-assistant__item">
          <div class="">
            <article class="slds-setup-assistant__step">
              <div class="slds-setup-assistant__step-summary">
                <div class="slds-media">
                  <div
                    class="slds-setup-assistant__step-summary-content slds-media__body"
                  >
                    <h3
                      class="slds-setup-assistant__step-summary-title slds-text-heading_small"
                    >
                      <lightning-icon
                        icon-name="utility:alert"
                        size="small"
                        class="slds-var-p-right_small"
                      ></lightning-icon>
                      1GP -> 2GP Package Migration (Generally Available)
                    </h3>
                    <p>
                      Are you still using first-generation managed packaging (1GP) for your package development work? If so, you're not alone. Many ISVs like you are looking to move to second-generation managed packaging (2GP) and take advantage of its many benefits.&nbsp;
                      <a
                        href="https://developer.salesforce.com/blogs/2025/06/move-to-managed-2gp-with-package-migrations"
                        target="_blank"
                        title="Learn More"
                        >Learn More</a
                      >
                    </p>
                  </div>
                  <div class="slds-media__figure slds-media__figure_reverse">
                    <lightning-button
                      variant="brand-outline"
                      label="Guide"
                      icon-name="utility:apex"
                      icon-position="right"
                      onclick={navigateTo2GPMigrationDocs}
                    ></lightning-button>
                  </div>
                </div>
              </div>
            </article>
          </div>
        </li>
      </ol>
    </div>
  </article>
</template>